var Layout = function () { var e = "admin/layout/img/", t = "admin/layout/css/", i = Metronic.getResponsiveBreakpoint("md"), a = function () { var e, t = $(".page-content"), a = $(".page-sidebar"), o = $("body"); if (o.hasClass("page-footer-fixed") === !0 && o.hasClass("page-sidebar-fixed") === !1) { var s = Metronic.getViewPort().height - $(".page-footer").outerHeight() - $(".page-header").outerHeight(); t.height() < s && t.attr("style", "min-height:" + s + "px") } else { if (o.hasClass("page-sidebar-fixed")) e = n(), o.hasClass("page-footer-fixed") === !1 && (e -= $(".page-footer").outerHeight()); else { var r = $(".page-header").outerHeight(), d = $(".page-footer").outerHeight(); e = Metronic.getViewPort().width < i ? Metronic.getViewPort().height - r - d : a.height() + 20, e + r + d <= Metronic.getViewPort().height && (e = Metronic.getViewPort().height - r - d) } t.attr("style", "min-height:" + e + "px") } }, o = function (e, t) { var a = location.hash.toLowerCase(), o = $(".page-sidebar-menu"); if ("click" === e || "set" === e ? t = $(t) : "match" === e && o.find("li > a").each(function () { var e = $(this).attr("href").toLowerCase(); return e.length > 1 && a.substr(1, e.length - 1) == e.substr(1) ? void (t = $(this)) : void 0 }), t && 0 != t.length && "javascript:;" !== t.attr("href").toLowerCase() && "#" !== t.attr("href").toLowerCase()) { parseInt(o.data("slide-speed")), o.data("keep-expanded"); o.find("li.active").removeClass("active"), o.find("li > a > .selected").remove(), o.hasClass("page-sidebar-menu-hover-submenu") === !1 ? o.find("li.open").each(function () { 0 === $(this).children(".sub-menu").length && ($(this).removeClass("open"), $(this).find("> a > .arrow.open").removeClass("open")) }) : o.find("li.open").removeClass("open"), t.parents("li").each(function () { $(this).addClass("active"), $(this).find("> a > span.arrow").addClass("open"), 1 === $(this).parent("ul.page-sidebar-menu").length && $(this).find("> a").append('<span class="selected"></span>'), 1 === $(this).children("ul.sub-menu").length && $(this).addClass("open") }), "click" === e && Metronic.getViewPort().width < i && $(".page-sidebar").hasClass("in") && $(".page-header .responsive-toggler").click() } }, s = function () { $(".page-sidebar").on("click", "li > a", function (e) { var t = $(this).next().hasClass("sub-menu"); if (!(Metronic.getViewPort().width >= i && 1 === $(this).parents(".page-sidebar-menu-hover-submenu").length)) { if (t === !1) return void (Metronic.getViewPort().width < i && $(".page-sidebar").hasClass("in") && $(".page-header .responsive-toggler").click()); if (!$(this).next().hasClass("sub-menu always-open")) { var o = $(this).parent().parent(), s = $(this), n = $(".page-sidebar-menu"), r = $(this).next(), d = n.data("auto-scroll"), c = parseInt(n.data("slide-speed")), l = n.data("keep-expanded"); l !== !0 && (o.children("li.open").children("a").children(".arrow").removeClass("open"), o.children("li.open").children(".sub-menu:not(.always-open)").slideUp(c), o.children("li.open").removeClass("open")); var h = -200; r.is(":visible") ? ($(".arrow", $(this)).removeClass("open"), $(this).parent().removeClass("open"), r.slideUp(c, function () { d === !0 && $("body").hasClass("page-sidebar-closed") === !1 && ($("body").hasClass("page-sidebar-fixed") ? n.slimScroll({ scrollTo: s.position().top }) : Metronic.scrollTo(s, h)), a() })) : t && ($(".arrow", $(this)).addClass("open"), $(this).parent().addClass("open"), r.slideDown(c, function () { d === !0 && $("body").hasClass("page-sidebar-closed") === !1 && ($("body").hasClass("page-sidebar-fixed") ? n.slimScroll({ scrollTo: s.position().top }) : Metronic.scrollTo(s, h)), a() })), e.preventDefault() } } }), $(".page-sidebar").on("click", " li > a.ajaxify", function (e) { e.preventDefault(), Metronic.scrollTop(); var t = $(this).attr("href"), a = $(".page-sidebar ul"), o = ($(".page-content"), $(".page-content .page-content-body")); a.children("li.active").removeClass("active"), a.children("arrow.open").removeClass("open"), $(this).parents("li").each(function () { $(this).addClass("active"), $(this).children("a > span.arrow").addClass("open") }), $(this).parents("li").addClass("active"), Metronic.getViewPort().width < i && $(".page-sidebar").hasClass("in") && $(".page-header .responsive-toggler").click(), Metronic.startPageLoading(); var s = $(this); $.ajax({ type: "GET", cache: !1, url: t, dataType: "html", success: function (e) { 0 === s.parents("li.open").length && $(".page-sidebar-menu > li.open > a").click(), Metronic.stopPageLoading(), o.html(e), Layout.fixContentHeight(), Metronic.initAjax() }, error: function (e, t, i) { Metronic.stopPageLoading(), o.html("<h4>Could not load the requested content.</h4>") } }) }), $(".page-content").on("click", ".ajaxify", function (e) { e.preventDefault(), Metronic.scrollTop(); var t = $(this).attr("href"), a = ($(".page-content"), $(".page-content .page-content-body")); Metronic.startPageLoading(), Metronic.getViewPort().width < i && $(".page-sidebar").hasClass("in") && $(".page-header .responsive-toggler").click(), $.ajax({ type: "GET", cache: !1, url: t, dataType: "html", success: function (e) { Metronic.stopPageLoading(), a.html(e), Layout.fixContentHeight(), Metronic.initAjax() }, error: function (e, t, i) { a.html("<h4>Could not load the requested content.</h4>"), Metronic.stopPageLoading() } }) }), $(document).on("click", ".page-header-fixed-mobile .page-header .responsive-toggler", function () { Metronic.scrollTop() }), d(), $(".page-sidebar").on("click", ".sidebar-search .remove", function (e) { e.preventDefault(), $(".sidebar-search").removeClass("open") }), $(".page-sidebar .sidebar-search").on("keypress", "input.form-control", function (e) { return 13 == e.which ? ($(".sidebar-search").submit(), !1) : void 0 }), $(".sidebar-search .submit").on("click", function (e) { e.preventDefault(), $("body").hasClass("page-sidebar-closed") && $(".sidebar-search").hasClass("open") === !1 ? (1 === $(".page-sidebar-fixed").length && $(".page-sidebar .sidebar-toggler").click(), $(".sidebar-search").addClass("open")) : $(".sidebar-search").submit() }), 0 !== $(".sidebar-search").length && ($(".sidebar-search .input-group").on("click", function (e) { e.stopPropagation() }), $("body").on("click", function () { $(".sidebar-search").hasClass("open") && $(".sidebar-search").removeClass("open") })) }, n = function () { var e = Metronic.getViewPort().height - $(".page-header").outerHeight(); return $("body").hasClass("page-footer-fixed") && (e -= $(".page-footer").outerHeight()), e }, r = function () { var e = $(".page-sidebar-menu"); return Metronic.destroySlimScroll(e), 0 === $(".page-sidebar-fixed").length ? void a() : void (Metronic.getViewPort().width >= i && (e.attr("data-height", n()), Metronic.initSlimScroll(e), a())) }, d = function () { var e = $("body"); e.hasClass("page-sidebar-fixed") && $(".page-sidebar").on("mouseenter", function () { e.hasClass("page-sidebar-closed") && $(this).find(".page-sidebar-menu").removeClass("page-sidebar-menu-closed") }).on("mouseleave", function () { e.hasClass("page-sidebar-closed") && $(this).find(".page-sidebar-menu").addClass("page-sidebar-menu-closed") }) }, c = function () { var e = $("body"); $.cookie && "1" === $.cookie("sidebar_closed") && Metronic.getViewPort().width >= i && ($("body").addClass("page-sidebar-closed"), $(".page-sidebar-menu").addClass("page-sidebar-menu-closed")), $("body").on("click", ".sidebar-toggler", function (t) { var i = $(".page-sidebar"), a = $(".page-sidebar-menu"); $(".sidebar-search", i).removeClass("open"), e.hasClass("page-sidebar-closed") ? (e.removeClass("page-sidebar-closed"), a.removeClass("page-sidebar-menu-closed"), $.cookie && $.cookie("sidebar_closed", "0")) : (e.addClass("page-sidebar-closed"), a.addClass("page-sidebar-menu-closed"), e.hasClass("page-sidebar-fixed") && a.trigger("mouseleave"), $.cookie && $.cookie("sidebar_closed", "1")), $(window).trigger("resize") }) }, l = function () { $(".page-header").on("click", '.hor-menu a[data-toggle="tab"]', function (e) { e.preventDefault(); var t = $(".hor-menu .nav"), i = t.find("li.current"); $("li.active", i).removeClass("active"), $(".selected", i).remove(); var a = $(this).parents("li").last(); a.addClass("current"), a.find("a:first").append('<span class="selected"></span>') }), $(".page-header").on("click", ".search-form", function (e) { $(this).addClass("open"), $(this).find(".form-control").focus(), $(".page-header .search-form .form-control").on("blur", function (e) { $(this).closest(".search-form").removeClass("open"), $(this).unbind("blur") }) }), $(".page-header").on("keypress", ".hor-menu .search-form .form-control", function (e) { return 13 == e.which ? ($(this).closest(".search-form").submit(), !1) : void 0 }), $(".page-header").on("mousedown", ".search-form.open .submit", function (e) { e.preventDefault(), e.stopPropagation(), $(this).closest(".search-form").submit() }), $('[data-hover="megamenu-dropdown"]').not(".hover-initialized").each(function () { $(this).dropdownHover(), $(this).addClass("hover-initialized") }), $(document).on("click", ".mega-menu-dropdown .dropdown-menu", function (e) { e.stopPropagation() }) }, h = function () { $("body").on("shown.bs.tab", 'a[data-toggle="tab"]', function () { a() }) }, p = function () { var e = 300, t = 500; navigator.userAgent.match(/iPhone|iPad|iPod/i) ? $(window).bind("touchend touchcancel touchleave", function (i) { $(this).scrollTop() > e ? $(".scroll-to-top").fadeIn(t) : $(".scroll-to-top").fadeOut(t) }) : $(window).scroll(function () { $(this).scrollTop() > e ? $(".scroll-to-top").fadeIn(t) : $(".scroll-to-top").fadeOut(t) }), $(".scroll-to-top").click(function (e) { return e.preventDefault(), $("html, body").animate({ scrollTop: 0 }, t), !1 }) }, g = function () { var e, t = $(".full-height-content"); if (e = Metronic.getViewPort().height - $(".page-header").outerHeight(!0) - $(".page-footer").outerHeight(!0) - $(".page-title").outerHeight(!0) - $(".page-bar").outerHeight(!0), t.hasClass("portlet")) { var a = t.find(".portlet-body"); if (Metronic.getViewPort().width < i) return void Metronic.destroySlimScroll(a.find(".full-height-content-body")); e = e - t.find(".portlet-title").outerHeight(!0) - parseInt(t.find(".portlet-body").css("padding-top")) - parseInt(t.find(".portlet-body").css("padding-bottom")) - 2, t.hasClass("full-height-content-scrollabel") ? (e -= 35, a.find(".full-height-content-body").css("height", e), Metronic.initSlimScroll(a.find(".full-height-content-body"))) : a.css("min-height", e) } else { if (Metronic.getViewPort().width < i) return void Metronic.destroySlimScroll(t.find(".full-height-content-body")); t.hasClass("full-height-content-scrollabel") ? (e -= 35, t.find(".full-height-content-body").css("height", e), Metronic.initSlimScroll(t.find(".full-height-content-body"))) : t.css("min-height", e) } }; return { initHeader: function () { l() }, setSidebarMenuActiveLink: function (e, t) { o(e, t) }, initSidebar: function () { r(), s(), c(), Metronic.isAngularJsApp() && o("match"), Metronic.addResizeHandler(r) }, initContent: function () { g(), h(), Metronic.addResizeHandler(a), Metronic.addResizeHandler(g) }, initFooter: function () { p() }, init: function () { this.initHeader(), this.initSidebar(), this.initContent(), this.initFooter() }, fixContentHeight: function () { a() }, initFixedSidebarHoverEffect: function () { d() }, initFixedSidebar: function () { r() }, getLayoutImgPath: function () { return Metronic.getAssetsPath() + e }, getLayoutCssPath: function () { return Metronic.getAssetsPath() + t } } }();
